<svg xmlns="http://www.w3.org/2000/svg" width="1900" height="1540" viewBox="0 0 1900 1540" role="img" aria-labelledby="title desc">
  <title id="title">M5.5 bulk actions states</title>
  <desc id="desc">M5.5 Prompt A preview showing default, loading, empty, error, and success states for Hide all and Reset defaults bulk actions.</desc>
  <defs>
    <style>
      .bg { fill: #f4f5f7; }
      .card { fill: #ffffff; stroke: #cfd8dc; stroke-width: 1.5; }
      .heading { font: 700 22px Arial, sans-serif; fill: #102027; }
      .subhead { font: 700 15px Arial, sans-serif; fill: #263238; }
      .body { font: 13px Arial, sans-serif; fill: #37474f; }
      .muted { font: 12px Arial, sans-serif; fill: #607d8b; }
      .tab-active { fill: #3f51b5; stroke: #2c3a8c; stroke-width: 1; }
      .tab-inactive { fill: #eceff1; stroke: #c7d0d6; stroke-width: 1; }
      .tab-text-active { font: 700 12px Arial, sans-serif; fill: #ffffff; }
      .tab-text { font: 700 12px Arial, sans-serif; fill: #5f6b73; }
      .button { fill: #eceff1; stroke: #b0bec5; stroke-width: 1; }
      .button-disabled { fill: #f5f5f5; stroke: #d7d7d7; stroke-width: 1; }
      .button-text { font: 700 12px Arial, sans-serif; fill: #334155; }
      .button-text-disabled { font: 700 12px Arial, sans-serif; fill: #94a3b8; }
      .divider { stroke: #e0e0e0; stroke-width: 1; }
      .legend { stroke: #455a64; stroke-width: 0.6; }
      .checkbox { fill: #ffffff; stroke: #607d8b; stroke-width: 1.2; }
      .checkbox-on { fill: #e8f5e9; stroke: #2e7d32; stroke-width: 1.2; }
      .row-title { font: 12px Arial, sans-serif; fill: #263238; }
      .iso-btn { fill: #eceff1; stroke: #b0bec5; stroke-width: 1; }
      .iso-val { fill: #ffffff; stroke: #b0bec5; stroke-width: 1; }
      .iso-text { font: 12px 'Courier New', monospace; fill: #37474f; }
      .iso-muted { font: 12px 'Courier New', monospace; fill: #90a4ae; }
      .viewer { fill: #f6f8fa; stroke: #c5d0d9; stroke-width: 1; }
      .protein { fill: none; stroke: #273b96; stroke-width: 3; stroke-linecap: round; opacity: 0.95; }
      .mesh-blue { fill: none; stroke: #1976d2; stroke-width: 1.2; }
      .mesh-red { fill: none; stroke: #d32f2f; stroke-width: 1.2; }
      .mesh-green { fill: none; stroke: #2e7d32; stroke-width: 1.2; }
      .mesh-gray { fill: none; stroke: #9e9e9e; stroke-width: 1.2; }
      .helper { fill: #f8fbff; stroke: #bbdefb; stroke-width: 1; }
      .warn { fill: #fff8e1; stroke: #ffcc80; stroke-width: 1; }
      .error { fill: #ffebee; stroke: #ef9a9a; stroke-width: 1; }
      .good { fill: #e8f5e9; stroke: #a5d6a7; stroke-width: 1; }
    </style>
  </defs>

  <rect class="bg" x="0" y="0" width="1900" height="1540"/>
  <text class="heading" x="48" y="44">M5.5 Prompt A: Bulk Actions Only (`Hide all`, `Reset defaults`)</text>
  <text class="muted" x="48" y="68">Scope: activate only action-row behavior. Preserve M5.1-M5.4 map/protein/iso contracts; reliability hardening remains deferred to M5.6.</text>

  <!-- Panel A -->
  <g transform="translate(40,100)">
    <rect class="card" x="0" y="0" width="560" height="650" rx="8"/>
    <text class="subhead" x="20" y="34">A. Default</text>
    <text class="muted" x="20" y="54">Bulk actions ready. Non-default working state shown before action click.</text>

    <rect class="tab-active" x="20" y="70" width="92" height="26" rx="5"/>
    <text class="tab-text-active" x="43" y="87">FragMap</text>
    <rect class="tab-inactive" x="118" y="70" width="80" height="26" rx="5"/>
    <text class="tab-text" x="143" y="87">Ligand</text>

    <rect class="button" x="20" y="108" width="95" height="30" rx="5"/>
    <text class="button-text" x="42" y="127">Hide all</text>
    <rect class="button" x="125" y="108" width="120" height="30" rx="5"/>
    <text class="button-text" x="144" y="127">Reset defaults</text>

    <line class="divider" x1="20" y1="154" x2="540" y2="154"/>
    <text class="subhead" x="20" y="178">Primary</text>

    <rect class="checkbox-on" x="20" y="194" width="16" height="16"/>
    <text class="body" x="24" y="207">✓</text>
    <circle class="legend" cx="54" cy="202" r="6" fill="#1976d2"/>
    <text class="row-title" x="68" y="206">Generic Donor</text>
    <rect class="iso-btn" x="300" y="190" width="24" height="20" rx="4"/>
    <text class="body" x="309" y="205">-</text>
    <rect class="iso-val" x="330" y="190" width="64" height="20" rx="4"/>
    <text class="iso-text" x="346" y="204">-1.1</text>
    <rect class="iso-btn" x="400" y="190" width="24" height="20" rx="4"/>
    <text class="body" x="408" y="205">+</text>

    <rect class="checkbox-on" x="20" y="226" width="16" height="16"/>
    <text class="body" x="24" y="239">✓</text>
    <circle class="legend" cx="54" cy="234" r="6" fill="#2e7d32"/>
    <text class="row-title" x="68" y="238">Generic Apolar</text>
    <rect class="iso-btn" x="300" y="222" width="24" height="20" rx="4"/>
    <text class="body" x="309" y="237">-</text>
    <rect class="iso-val" x="330" y="222" width="64" height="20" rx="4"/>
    <text class="iso-text" x="346" y="236">-1.5</text>
    <rect class="iso-btn" x="400" y="222" width="24" height="20" rx="4"/>
    <text class="body" x="408" y="237">+</text>

    <rect class="helper" x="20" y="262" width="520" height="90" rx="6"/>
    <text class="body" x="36" y="288">Pre-action state: two maps visible, iso values edited from defaults.</text>
    <text class="muted" x="36" y="310">Bulk actions will apply to this current state in place.</text>

    <rect class="viewer" x="20" y="368" width="520" height="138" rx="6"/>
    <path class="protein" d="M44 488 C98 420, 170 500, 230 436 C286 392, 350 470, 512 414"/>
    <polyline class="mesh-blue" points="130,448 170,420 214,442 182,482 134,472 130,448"/>
    <polyline class="mesh-green" points="262,454 304,430 340,452 316,486 268,476 262,454"/>
    <text class="muted" x="32" y="392">Viewer shows active maps before bulk action is triggered.</text>
  </g>

  <!-- Panel B -->
  <g transform="translate(670,100)">
    <rect class="card" x="0" y="0" width="560" height="650" rx="8"/>
    <text class="subhead" x="20" y="34">B. Loading</text>
    <text class="muted" x="20" y="54">`Hide all` in progress; action row temporarily locked.</text>

    <rect class="tab-active" x="20" y="70" width="92" height="26" rx="5"/>
    <text class="tab-text-active" x="43" y="87">FragMap</text>
    <rect class="tab-inactive" x="118" y="70" width="80" height="26" rx="5"/>
    <text class="tab-text" x="143" y="87">Ligand</text>

    <rect class="button-disabled" x="20" y="108" width="95" height="30" rx="5"/>
    <text class="button-text-disabled" x="42" y="127">Hide all</text>
    <rect class="button-disabled" x="125" y="108" width="120" height="30" rx="5"/>
    <text class="button-text-disabled" x="144" y="127">Reset defaults</text>

    <rect class="warn" x="20" y="158" width="520" height="98" rx="6"/>
    <text class="body" x="36" y="184">Applying `Hide all`...</text>
    <text class="muted" x="36" y="206">Visible map set is being updated in place.</text>
    <text class="muted" x="36" y="228">Buttons re-enable after completion.</text>

    <line class="divider" x1="20" y1="272" x2="540" y2="272"/>
    <text class="subhead" x="20" y="296">Primary</text>
    <rect class="checkbox-on" x="20" y="312" width="16" height="16"/>
    <text class="body" x="24" y="325">✓</text>
    <circle class="legend" cx="54" cy="320" r="6" fill="#1976d2"/>
    <text class="row-title" x="68" y="324">Generic Donor (transitioning off)</text>
    <rect class="checkbox-on" x="20" y="344" width="16" height="16"/>
    <text class="body" x="24" y="357">✓</text>
    <circle class="legend" cx="54" cy="352" r="6" fill="#2e7d32"/>
    <text class="row-title" x="68" y="356">Generic Apolar (transitioning off)</text>

    <rect class="viewer" x="20" y="382" width="520" height="124" rx="6"/>
    <path class="protein" d="M44 496 C98 430, 170 500, 230 440 C286 398, 350 470, 512 418"/>
    <polyline class="mesh-blue" points="132,458 166,434 208,454 180,486 136,478 132,458"/>
    <text class="muted" x="32" y="406">Intermediate state while bulk hide operation applies.</text>
  </g>

  <!-- Panel C -->
  <g transform="translate(1300,100)">
    <rect class="card" x="0" y="0" width="560" height="650" rx="8"/>
    <text class="subhead" x="20" y="34">C. Empty</text>
    <text class="muted" x="20" y="54">`Hide all` completed. No visible maps; caches retained.</text>

    <rect class="tab-active" x="20" y="70" width="92" height="26" rx="5"/>
    <text class="tab-text-active" x="43" y="87">FragMap</text>
    <rect class="tab-inactive" x="118" y="70" width="80" height="26" rx="5"/>
    <text class="tab-text" x="143" y="87">Ligand</text>

    <rect class="button" x="20" y="108" width="95" height="30" rx="5"/>
    <text class="button-text" x="42" y="127">Hide all</text>
    <rect class="button" x="125" y="108" width="120" height="30" rx="5"/>
    <text class="button-text" x="144" y="127">Reset defaults</text>

    <line class="divider" x1="20" y1="154" x2="540" y2="154"/>
    <text class="subhead" x="20" y="178">Primary</text>
    <rect class="checkbox" x="20" y="194" width="16" height="16"/>
    <circle class="legend" cx="54" cy="202" r="6" fill="#1976d2"/>
    <text class="row-title" x="68" y="206">Generic Donor</text>
    <rect class="iso-val" x="330" y="190" width="64" height="20" rx="4"/>
    <text class="iso-text" x="346" y="204">-1.1</text>

    <rect class="checkbox" x="20" y="226" width="16" height="16"/>
    <circle class="legend" cx="54" cy="234" r="6" fill="#2e7d32"/>
    <text class="row-title" x="68" y="238">Generic Apolar</text>
    <rect class="iso-val" x="330" y="222" width="64" height="20" rx="4"/>
    <text class="iso-text" x="346" y="236">-1.5</text>

    <rect class="helper" x="20" y="262" width="520" height="96" rx="6"/>
    <text class="body" x="36" y="288">No visible FragMaps after `Hide all`.</text>
    <text class="muted" x="36" y="310">Loaded map caches remain available for fast re-show.</text>
    <text class="muted" x="36" y="332">Per-map iso values remain unchanged.</text>

    <rect class="viewer" x="20" y="372" width="520" height="134" rx="6"/>
    <path class="protein" d="M44 490 C104 420, 172 496, 238 430 C298 386, 354 462, 514 420"/>
    <text class="muted" x="32" y="394">Viewer clear of map wireframes; protein/ligand unaffected.</text>
  </g>

  <!-- Panel D -->
  <g transform="translate(40,820)">
    <rect class="card" x="0" y="0" width="905" height="680" rx="8"/>
    <text class="subhead" x="20" y="34">D. Error</text>
    <text class="muted" x="20" y="54">`Reset defaults` attempted; one previously disabled row retry still fails.</text>

    <rect class="tab-active" x="20" y="70" width="92" height="26" rx="5"/>
    <text class="tab-text-active" x="43" y="87">FragMap</text>
    <rect class="tab-inactive" x="118" y="70" width="80" height="26" rx="5"/>
    <text class="tab-text" x="143" y="87">Ligand</text>

    <rect class="button" x="20" y="108" width="95" height="30" rx="5"/>
    <text class="button-text" x="42" y="127">Hide all</text>
    <rect class="button" x="125" y="108" width="120" height="30" rx="5"/>
    <text class="button-text" x="144" y="127">Reset defaults</text>

    <rect class="error" x="20" y="158" width="865" height="86" rx="6"/>
    <text class="body" x="36" y="184">`Reset defaults` completed with one row retry failure: `Water Oxygen` remains disabled.</text>
    <text class="muted" x="36" y="206">Other rows reset to defaults and remain interactive.</text>
    <text class="muted" x="36" y="228">No route reload and no global panel failure.</text>

    <rect class="viewer" x="20" y="260" width="470" height="252" rx="6"/>
    <path class="protein" d="M48 470 C106 308, 166 486, 230 320 C286 246, 340 432, 454 276"/>
    <polyline class="mesh-gray" points="262,426 292,396 334,420 312,456 270,446 262,426"/>
    <text class="muted" x="32" y="284">Viewer remains stable while error is isolated to one row retry.</text>

    <line class="divider" x1="510" y1="260" x2="885" y2="260"/>
    <text class="subhead" x="510" y="286">Advanced rows after reset attempt</text>
    <rect class="checkbox" x="510" y="304" width="16" height="16"/>
    <circle class="legend" cx="544" cy="312" r="6" fill="#0097a7"/>
    <text class="row-title" x="558" y="316">Hydroxyl Oxygen (reset to -0.8)</text>
    <rect class="iso-val" x="770" y="300" width="64" height="20" rx="4"/>
    <text class="iso-text" x="786" y="314">-0.8</text>

    <rect class="checkbox" x="510" y="336" width="16" height="16"/>
    <circle class="legend" cx="544" cy="344" r="6" fill="#f9a825"/>
    <text class="row-title" x="558" y="348">Water Oxygen (disabled)</text>
    <rect class="iso-val" x="770" y="332" width="64" height="20" rx="4"/>
    <text class="iso-muted" x="782" y="346">-0.3</text>
    <text class="muted" x="558" y="370">Retry deferred to M5.6 reliability UX.</text>
  </g>

  <!-- Panel E -->
  <g transform="translate(975,820)">
    <rect class="card" x="0" y="0" width="885" height="680" rx="8"/>
    <text class="subhead" x="20" y="34">E. Success</text>
    <text class="muted" x="20" y="54">`Reset defaults` completed in place.</text>

    <rect class="tab-active" x="20" y="70" width="92" height="26" rx="5"/>
    <text class="tab-text-active" x="43" y="87">FragMap</text>
    <rect class="tab-inactive" x="118" y="70" width="80" height="26" rx="5"/>
    <text class="tab-text" x="143" y="87">Ligand</text>

    <rect class="button" x="20" y="108" width="95" height="30" rx="5"/>
    <text class="button-text" x="42" y="127">Hide all</text>
    <rect class="button" x="125" y="108" width="120" height="30" rx="5"/>
    <text class="button-text" x="144" y="127">Reset defaults</text>

    <rect class="good" x="20" y="158" width="845" height="92" rx="6"/>
    <text class="body" x="36" y="184">Defaults restored: all map rows hidden and per-map iso values reset to canonical defaults.</text>
    <text class="muted" x="36" y="206">Camera unchanged; top-bar `Reset View` remains the separate viewer control.</text>
    <text class="muted" x="36" y="228">Bulk actions completed with no page reload.</text>

    <rect class="viewer" x="20" y="266" width="430" height="246" rx="6"/>
    <path class="protein" d="M44 468 C104 320, 164 476, 224 328 C282 252, 336 424, 414 296"/>
    <text class="muted" x="32" y="290">Baseline camera restored; no FragMap meshes visible.</text>

    <line class="divider" x1="470" y1="266" x2="865" y2="266"/>
    <text class="subhead" x="470" y="292">Primary defaults</text>
    <rect class="checkbox" x="470" y="310" width="16" height="16"/>
    <circle class="legend" cx="504" cy="318" r="6" fill="#1976d2"/>
    <text class="row-title" x="518" y="322">Generic Donor</text>
    <rect class="iso-val" x="736" y="306" width="64" height="20" rx="4"/>
    <text class="iso-text" x="752" y="320">-0.8</text>

    <rect class="checkbox" x="470" y="342" width="16" height="16"/>
    <circle class="legend" cx="504" cy="350" r="6" fill="#d32f2f"/>
    <text class="row-title" x="518" y="354">Generic Acceptor</text>
    <rect class="iso-val" x="736" y="338" width="64" height="20" rx="4"/>
    <text class="iso-text" x="752" y="352">-0.8</text>

    <rect class="checkbox" x="470" y="374" width="16" height="16"/>
    <circle class="legend" cx="504" cy="382" r="6" fill="#2e7d32"/>
    <text class="row-title" x="518" y="386">Generic Apolar</text>
    <rect class="iso-val" x="736" y="370" width="64" height="20" rx="4"/>
    <text class="iso-text" x="752" y="384">-1.0</text>
  </g>
</svg>
