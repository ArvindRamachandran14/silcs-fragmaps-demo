# M5.4 Preview Index - Per-Map Iso Controls

## M5.4 Scope Lock
- `M5.4` only.
- Includes per-map iso controls for iso-adjustable rows:
  - decrement button (`-`), numeric value, increment button (`+`),
  - numeric contract (`step`, `min`, `max`, precision),
  - row-local clamp/revert behavior.
- Excludes `M5.5+` behavior:
  - no bulk-action behavior changes,
  - no reliability/retry hardening,
  - no changes to map/protein/ligand behavior contracts already set by `M5.1`-`M5.3`.

## Coverage Checklist
- [x] `Default` state: per-map iso controls shown with canonical defaults for iso-adjustable rows.
- [x] `Loading` state: row-scoped iso update in progress with temporary row disable treatment.
- [x] `Empty` state: no visible maps while row iso values remain editable/stored.
- [x] `Error` state: invalid typed input reverts to last valid value and out-of-range input clamps to bounds.
- [x] `Success` state: visible maps reflect updated row iso values in place.
- [x] `Exclusion Map` row remains visibility-toggleable with non-editable iso (`disabled/fixed`).
- [x] No global iso control appears.
- [x] Scope constrained to per-map iso controls only.

## Artifact Matrix
| State | Artifact | Notes |
|---|---|---|
| Default | `desktop/m5.4-per-map-iso-controls-states.svg` (Panel A) | Canonical row defaults with per-map iso controls visible |
| Loading | `desktop/m5.4-per-map-iso-controls-states.svg` (Panel B) | One row shows temporary loading/disable during iso update |
| Empty | `desktop/m5.4-per-map-iso-controls-states.svg` (Panel C) | Zero visible maps with stored per-row iso values |
| Error | `desktop/m5.4-per-map-iso-controls-states.svg` (Panel D) | Row-local clamp/revert handling without global impact |
| Success | `desktop/m5.4-per-map-iso-controls-states.svg` (Panel E) | In-place iso updates reflected for visible rows |

## Open UI Questions
1. None currently; control shape and numeric behavior follow the locked spec contract for this slice.

## Traceability
- Plan refs: `docs/plans/execution-plan.md` Sections `1.3`, `3`, and `3.1` (`M5.4`).
- Spec refs: `docs/specs/fragmap-controls-spec.md` Sections `5`, `7`, `8.4`, and `13`.

## Approval State
- Current: `PASS` (`APPROVED UI PREVIEW` received for `M5.4`; Prompt B implementation completed)
