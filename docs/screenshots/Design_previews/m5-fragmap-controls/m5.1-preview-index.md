# M5.1 Preview Index - FragMap Panel Shell

## M5.1 Scope Lock
- Panel shell only.
- Includes shell layout for action row + `Primary 3` + expandable `Advanced` sections.
- Includes canonical labels/colors and default all-hidden representation.
- Excludes runtime map loading/toggling/iso behavior.

## Coverage Checklist
- [x] `Default` state: `Primary 3` visible, `Advanced` collapsed, all rows unchecked.
- [x] `Loading` state: shell-level loading placeholders while preserving layout footprint.
- [x] `Empty` state: all maps hidden helper text with no error styling.
- [x] `Error` state: non-blocking shell error messaging with disabled controls treatment.
- [x] `Success` state: advanced section expanded with full canonical map list and legend colors.
- [x] Right controls panel framework is simplified to two tabs aligned to current reviewer direction (`FragMap` active; `Ligand` inactive placeholder in M5.1).
- [x] Canonical map labels and colors match `docs/specs/fragmap-controls-spec.md` Section `4` and `4.1`.
- [x] Panel remains within shell-only boundaries (no runtime map/iso interactions shown).

## Artifact Matrix
| State | Artifact | Notes |
|---|---|---|
| Default | `desktop/m5.1-fragmap-panel-shell-states.svg` (Panel A) | Action row + Primary 3 only, all-hidden baseline |
| Loading | `desktop/m5.1-fragmap-panel-shell-states.svg` (Panel B) | Skeleton layout preserving final geometry |
| Empty | `desktop/m5.1-fragmap-panel-shell-states.svg` (Panel C) | Helper text only, no runtime effects |
| Error | `desktop/m5.1-fragmap-panel-shell-states.svg` (Panel D) | Non-blocking panel-level error treatment |
| Success | `desktop/m5.1-fragmap-panel-shell-states.svg` (Panel E) | Advanced expanded; complete canonical row list |

## Placement in Full Viewer
- Context artifact: `desktop/m5.1-viewer-context-placement.svg`
- Purpose: show exactly where the M5.1 FragMap panel shell appears within the larger viewer page (tabbed right controls panel beside the main viewport).
- Current framework simplification: both context and state artifacts use `FragMap` + `Ligand` tabs only.
- Note: context image is additive orientation support; state-page artifact remains the primary Prompt-A review surface.

## Resolved UI Questions
1. State sheet remains multi-state (`Default`/`Loading`/`Empty`/`Error`/`Success`) as the approved Prompt-A review surface.
2. `Advanced` row-count badge is deferred (not required in `M5.1`).
3. Loading state keeps action-row controls visually non-interactive to avoid implying runtime wiring before `M5.2+`.
4. Shell empty helper copy remains concise (`No FragMaps visible`) with no extra runtime instruction text in `M5.1`.

## Traceability
- Plan refs: `docs/plans/execution-plan.md` Section `1.3` and Section `3.1` (`M5.1`).
- Spec refs: `docs/specs/fragmap-controls-spec.md` Sections `4`, `4.1`, `5`, and `7`.

## Approval State
- Current: `APPROVED UI PREVIEW`
- Approval reference: in-thread approval recorded on 2026-02-16.
