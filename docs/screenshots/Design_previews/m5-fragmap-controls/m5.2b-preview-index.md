# M5.2b Preview Index - Protein Visibility Toggle

## M5.2b Scope Lock
- `M5.2b` only.
- Includes one new behavior preview:
  - in-place `Show Protein` checkbox control placed in the tab row (to the right of `FragMap` and `Ligand`), controlling protein show/hide in the `FragMap` tab.
- Default state for this toggle is `ON`.
- Excludes `M5.3+` behavior:
  - Advanced/Exclusion behavior changes,
  - per-map iso controls,
  - bulk actions behavior changes,
  - reliability hardening and retry UX finalization.

## Coverage Checklist
- [x] `Default` state: `Show Protein` control is in the tab row and checked (`ON`) by default.
- [x] `Show Protein` control layout: label+checkbox are centered as one cluster in the pill with visible spacing between text and checkbox.
- [x] `Show Protein` typography uses the same tab-label font as `FragMap` and `Ligand`.
- [x] `Show Protein` checkbox uses the same checkbox visual style family as map/ligand row checkboxes (with a disabled variant in loading).
- [x] `Loading` state: toggle shown disabled while viewer is in startup loading state.
- [x] `Empty` state: protein `OFF` with no visible FragMaps.
- [x] `Error` state: protein-toggle failure is non-blocking and does not reset map rows.
- [x] `Success` state: protein `OFF` preserves visible FragMaps/ligand context for overlap inspection.
- [x] Right-panel framework remains aligned to approved shell (`FragMap` active, `Ligand` sibling tab).
- [x] Scope is constrained to protein-toggle behavior only (no M5.3+ runtime controls shown).

## Artifact Matrix
| State | Artifact | Notes |
|---|---|---|
| Default | `desktop/m5.2b-protein-visibility-states.svg` (Panel A) | Tab-row `Show Protein` control visible and `ON` by default |
| Loading | `desktop/m5.2b-protein-visibility-states.svg` (Panel B) | Viewer startup loading lock behavior for row interactivity |
| Empty | `desktop/m5.2b-protein-visibility-states.svg` (Panel C) | Protein hidden and zero visible maps |
| Error | `desktop/m5.2b-protein-visibility-states.svg` (Panel D) | Protein-toggle failure message with unaffected map-row continuity |
| Success | `desktop/m5.2b-protein-visibility-states.svg` (Panel E) | Protein hidden while map/ligand context remains stable |

## Open UI Questions
1. None currently; design intent is explicit and fully scoped for `M5.2b`.

## Traceability
- Plan refs: `docs/plans/execution-plan.md` Sections `1.3`, `3`, and `3.1` (`M5.2b`).
- Spec refs: `docs/specs/viewer-core-spec.md` Sections `2`, `6`, and `10`; `docs/specs/fragmap-controls-spec.md` Sections `5`, `6`, `7`, `8.2`, and `13`.

## Approval State
- Current: `BLOCKED-DESIGN`
- Next action: await explicit `APPROVED UI PREVIEW` token before starting `M5.2b` Prompt B.
